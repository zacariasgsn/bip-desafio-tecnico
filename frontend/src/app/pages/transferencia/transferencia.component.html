<h2>Transferir Benefício</h2>

<form [formGroup]="form" (ngSubmit)="transferir()" class="transferencia-form">

  <!-- ORIGEM -->
  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Origem</mat-label>
    <mat-select
      formControlName="fromId"
      [errorStateMatcher]="matcher">

      <mat-option *ngFor="let b of beneficios" [value]="b.id">
        {{ b.nome }} — {{ b.valor | currency:'BRL' }}
      </mat-option>
    </mat-select>

    <mat-error *ngIf="form.get('fromId')?.hasError('required')">
      Origem é obrigatória
    </mat-error>
  </mat-form-field>

  <!-- DESTINO -->
  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Destino</mat-label>
    <mat-select
      formControlName="toId"
      [errorStateMatcher]="matcher">

      <mat-option *ngFor="let b of beneficios" [value]="b.id">
        {{ b.nome }} — {{ b.valor | currency:'BRL' }}
      </mat-option>
    </mat-select>

    <mat-error *ngIf="form.get('toId')?.hasError('required')">
      Destino é obrigatório
    </mat-error>
  </mat-form-field>

  <!-- VALOR -->
  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Valor</mat-label>
    <input
      matInput
      type="number"
      formControlName="valor"
      min="0.01"
      step="0.01"
      [errorStateMatcher]="matcher">

    <mat-error *ngIf="form.get('valor')?.hasError('required')">
      Valor é obrigatório
    </mat-error>

    <mat-error *ngIf="form.get('valor')?.hasError('min')">
      Valor deve ser maior que zero
    </mat-error>
  </mat-form-field>

  <!-- BOTÃO -->
  <button
    mat-raised-button
    color="primary"
    type="submit"
    [disabled]="carregando || form.invalid">

    {{ carregando ? 'Transferindo...' : 'Transferir' }}
  </button>

</form>
